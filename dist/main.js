(()=>{var e={619:e=>{e.exports=function(){this.test=function(){console.log("Ура! Файли успішно розділені")},this.openResults=function(e){}}}},t={};const n=new(function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(619)),o=[{type:"radio-mood",question:"Який настрій у вас сьогодні?",answers:["Чудовий","Нудно","Сумний","Втомлений"],img:["img/5307603774627505126 1@2x.png","img/5307603774627505123 1@2x.png","img/5307603774627505125 1@2x.png","img/5307603774627505124 1@2x.png"],needs:!0},{type:"range",question:"Оберіть тривалість фільму",answers:["0 хв","1 год.","3 год.","5 год.","7 год."],needs:!0},{type:"radio",question:"З ким переглядатимете фільм?",answers:["Наодинці","З друзями","З другою половинкою","З родиною (разом з дітьми)"],needs:!0},{type:"input-fields",question:"Роки виходу фільму",answers:["Не раніше","Не пізніше"],placeholder:["1950","Поточний рік"],needs:!1},{type:"option",question:"У якому жанрі шукатимемо фільм?",answers:"Драма, комедія, бойовик, трилер, жахи, фантастика, фентезі, пригоди, мелодрама, документальний фільм, вестерн, історичний фільм, кримінал, мюзикл, анімаційний фільм, спортивний фільм, сімейний фільм, комедійний бойовик, науково-фантастичний трилер, романтична фантастика, пригодницьке фентезі",default:"Вибрати жанр",needs:!1}];window.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll("[data-modal]"),t=document.querySelector(".modal"),a=document.querySelector(".modal-overlay"),s=document.querySelector("[data-close]");function r(){t.classList.add("show"),a.classList.add("show"),document.body.style.overflow="hidden"}function l(){t.classList.remove("show"),a.classList.remove("show"),document.body.style.overflow=""}const c=document.querySelector(".form");var i;e.forEach((e=>{e.addEventListener("click",r)})),s.addEventListener("click",l),a.addEventListener("click",l),document.addEventListener("keydown",(e=>{"Escape"===e.code&&t.classList.contains("show")&&l()})),c.innerHTML="",i=o,console.log("showQuestion"),i.forEach(((e,t)=>{const n=document.createElement("div");n.classList.add("question-wrapper");const o=`<div class="question-number-container">\n                    <span class="question-number">${t+1}</span>\n                </div>      `;n.innerHTML=o;const a=document.createElement("div");a.classList.add("question-item");let s="";switch(e.needs&&(s+='<p class="required-field">*поле обов’язкове</p>'),s+=`<p class="question">${e.question}</p>`,a.innerHTML=s,e.type){case"radio-mood":{const{img:t,answers:n}=e,o=n.length,s=document.createElement("div");let r;a.appendChild(s),s.classList="mood-options";for(let e=0;e<o;e++){const o=localStorage.getItem("radioMood");r=o?n[e]===o:"Чудовий"===n[e];const a=`\n                            <label class="mood-option">\n                                <input type="radio" name="mood" value="${n[e]}" ${r?"checked":""} />\n                                <div class="icon">\n                                    <img src="${t[e]}" alt="" />\n                                </div>\n                                <span>${n[e]}</span>\n                            </label>`;s.innerHTML+=a}break}case"radio":{let t;for(let n of e.answers){const e=localStorage.getItem("radio");t=e?n===e:"Наодинці"===n;const o=`\n            <label class="radio-button-label">\n                <input class="radio-button-field" type="radio" name="movie-partner" value="${n}" ${t?"checked":""} />\n                <span>${n}</span>\n            </label>`;a.innerHTML+=o}break}case"range":{const t='   <div class = "slider-group">\n                            <input id="lower-slider" class="lower-range-slider" type="range" min="0" max="7" step="1" value="0" required />\n                            <input id="upper-slider" class="upper-range-slider" type="range" min="0" max="7" step="1" value="7" required />\n                        </div>\n                        <div class="slider-labels"></div>';a.innerHTML+=t;const n=a.querySelector(".slider-labels");e.answers.forEach(((e,t)=>{const o=document.createElement("span");o.textContent=e,n.appendChild(o)}));break}case"input-fields":{const t=e.answers,n=e.placeholder,o=t.length,s=[];for(let e=0;e<o;e++){const t=localStorage.getItem(`input-field-${e}`);s[e]=t||""}for(let e=0;e<o;e++){const o=`\n              <label class="input-field-label">\n                <span>${t[e]}</span>\n                <input class="text-input-field" type="text" placeholder="${n[e]}" name="year-min-${e}" pattern="\\d{4}"\n                      value="${s[e]}" /> \x3c!-- Підставляємо значення із savedValues --\x3e\n              </label>\n            `;a.innerHTML+=o}break}case"option":{const t=e.answers.split(", ").map((e=>e[0].toUpperCase()+e.slice(1))),n=document.createElement("div");n.className="checkbox-options";const o=localStorage.getItem("selectedOptions"),s=o?o.split(","):[];t.forEach((e=>{const t=` \n              <label class="checkbox-button-label">\n                <input class="checkbox-button-field" type="checkbox" name="genre" value="${e}" ${s.includes(e)?"checked":""} />\n                <span>${e}</span>\n              </label>`;n.innerHTML+=t})),a.appendChild(n);break}}c.appendChild(n),n.appendChild(a)})),document.querySelectorAll('.mood-option input[type="radio"]').forEach((e=>{e.addEventListener("change",(e=>{const t=e.target.value;localStorage.setItem("radioMood",t)}))})),document.querySelectorAll(".radio-button-field").forEach((e=>{e.addEventListener("change",(e=>{const t=e.target.value;localStorage.setItem("radio",t)}))})),document.querySelectorAll(".text-input-field").forEach(((e,t)=>{e.addEventListener("input",(()=>{localStorage.setItem(`input-field-${t}`,e.value)}))}));const d=document.querySelectorAll(".checkbox-button-field");d.forEach((e=>{e.addEventListener("change",(()=>{const e=[];d.forEach((t=>{t.checked&&e.push(t.value)})),localStorage.setItem("selectedOptions",e.join(","))}))}));const u=document.querySelector("#lower-slider"),p=document.querySelector("#upper-slider");u.addEventListener("input",(()=>{localStorage.setItem("lowerSliderValue",u.value)})),p.addEventListener("input",(()=>{localStorage.setItem("upperSliderValue",p.value)}));const m=document.createElement("button");m.classList.add("button","submit-btn"),m.type="submit",m.textContent="Отримати добірку фільмів",c.appendChild(m);let h=[];function v(e){const t=["Комедія","Драма","Трилер","Фантастика","Мелодрама","Бойовик","Пригоди","Анімація","Документальний","Жахи"],n=["Цей фільм має захоплюючий сюжет.","Цей фільм має чудову акторську гру.","Цей фільм має вражаючі спецефекти.","Цей фільм має глибокий сенс.","Цей фільм має чудову музику.","Цей фільм має непередбачуваний фінал.","Цей фільм має цікаві персонажі.","Цей фільм має гарну кінематографію.","Цей фільм має багато гумору.","Цей фільм має захоплюючі пригоди."];return{name:`Фільм ${e}`,genre:t[Math.floor(Math.random()*t.length)],year:`${2e3+Math.floor(22*Math.random())}`,reason:n[Math.floor(Math.random()*n.length)],rating:(5*Math.random()).toFixed(1)}}document.querySelector(".error-input-min"),document.querySelector(".error-input-max"),document.querySelector("#year-min"),document.querySelector("#year-max"),m.addEventListener("click",(e=>{e.preventDefault(),function(e){e.forEach((e=>{const{type:t,question:n}=e;let o="";switch(t){case"radio-mood":o=`${document.querySelector('input[name="mood"]:checked')?.value||null}`;break;case"range":o=`Від ${document.querySelector("#lower-slider").value} до ${document.querySelector("#upper-slider").value}`;break;case"radio":o=`${document.querySelector('input[name="movie-partner"]:checked')?.value||null}`;break;case"input-fields":o=`Не раніше ${document.querySelector("#year-min")?.value||"не вказано"}, не пізніше: ${document.querySelector("#year-max")?.value||"не вказано"}`;break;case"checkbox":{const t=Array.from(document.querySelectorAll('input[name="genre"]:checked')).map((e=>e.value));o=0===t.length?e.answers.split(", ").map((e=>e[0].toUpperCase()+e.slice(1))).join(", "):t.join(", ");break}}const a={question:n,answer:o};h.push(a)})),console.log(h),async function(e=!0){console.log("Відправка запиту...");const t=document.createElement("div");t.id="spinner-container";const o=document.createElement("img");o.src="../src/icons/spinner.svg",o.alt="Loading...",t.appendChild(o),document.body.appendChild(t);try{if(e){const e=[];for(let t=1;t<=10;t++)e.push(v(t));console.log(e),l(),n.test()}else{const e=await fetch("http://localhost:3000/api/getMovieRecommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!e.ok){const t=await e.text();return void console.log("Error: "+t)}const t=await e.json();l(),console.log(t),n.openResults(t)}}finally{t.remove()}}()}(o),localStorage.clear()}))}))})();