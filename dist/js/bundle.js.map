{"version":3,"file":"bundle.js","mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;UCTA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;ACtBA;AACA;AACA,qBAAqB,mBAAO,CAAC,8CAAe;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,UAAU;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,iBAAiB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,IAAI,gCAAgC;AACrE;AACA,gDAAgD,OAAO;AACvD;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,6FAA6F,WAAW;AACxG;AACA,cAAc;AACd,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C,mEAAmE,EAAE;AACrE,2DAA2D;AAC3D;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA,wBAAwB,eAAe;AACvC,2EAA2E,oBAAoB,mBAAmB,EAAE,eAAe,EAAE;AACrI,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,OAAO;AAClG;AACA,cAAc;AACd,wBAAwB,OAAO;AAC/B;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,0CAA0C,MAAM,iBAAiB;AACjE,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,OAAO;AACP,0EAA0E;AAC1E,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,GAAG;AACH;AACA;AACA,iEAAiE;AACjE,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,uBAAuB;AACxE;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,UAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,aAAa,KAAK,YAAY;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,UAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,UAAU,gBAAgB,UAAU;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,aAAa;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,qEAAqE;AACrE,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,aAAa;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC","sources":["webpack://yourbestfilm/./src/js/result_page.js","webpack://yourbestfilm/webpack/bootstrap","webpack://yourbestfilm/./src/js/script.js"],"sourcesContent":["function printResults() {\r\n    this.test = function() {\r\n        console.log('Ура! Файли успішно розділені');\r\n    }\r\n    this.openResults = function(recommendations) {\r\n        // відкриття нової сторінки та виведення результатів на ній\r\n    }\r\n}\r\n\r\nmodule.exports = printResults;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// запитання\r\n// console.log(printResults);\r\nconst printResults = require(\"./result_page\");\r\n\r\nconst printNewResults = new printResults();\r\n\r\nconst shortQuestions = [\r\n  {\r\n    type: \"radio-mood\",\r\n    question: \"Який настрій у вас сьогодні?\",\r\n    answers: [\"Чудовий\", \"Нудно\", \"Сумний\", \"Втомлений\"],\r\n    img: [\r\n      \"img/5307603774627505126 1@2x.png\",\r\n      \"img/5307603774627505123 1@2x.png\",\r\n      \"img/5307603774627505125 1@2x.png\",\r\n      \"img/5307603774627505124 1@2x.png\",\r\n    ],\r\n    needs: true,\r\n  },\r\n\r\n  {\r\n    type: \"range\",\r\n    question: \"Оберіть тривалість фільму\",\r\n    answers: [\"0 хв\", \"1 год.\", \"3 год.\", \"5 год.\", \"7 год.\"],\r\n    needs: true,\r\n  },\r\n\r\n  {\r\n    type: \"radio\",\r\n    question: \"З ким переглядатимете фільм?\",\r\n    answers: [\r\n      \"Наодинці\",\r\n      \"З друзями\",\r\n      \"З другою половинкою\",\r\n      \"З родиною (разом з дітьми)\",\r\n    ],\r\n    needs: true,\r\n  },\r\n\r\n  {\r\n    type: \"input-fields\",\r\n    question: \"Роки виходу фільму\",\r\n    answers: [\"Не раніше\", \"Не пізніше\"],\r\n    placeholder: [\"1950\", \"Поточний рік\"],\r\n    needs: false,\r\n  },\r\n\r\n  {\r\n    type: \"checkbox\",\r\n    question: \"У якому жанрі шукатимемо фільм?\",\r\n    answers:\r\n      \"Драма, комедія, бойовик, трилер, жахи, фантастика, фентезі, пригоди, мелодрама, документальний фільм, вестерн, історичний фільм, кримінал, мюзикл, анімаційний фільм, спортивний фільм, сімейний фільм, комедійний бойовик, науково-фантастичний трилер, романтична фантастика, пригодницьке фентезі\",\r\n    default: \"Вибрати жанр\",\r\n    needs: false,\r\n  },\r\n];\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n  // ---------------------------- Модальне вікно\r\n\r\n  const modalTrigger = document.querySelectorAll(\"[data-modal]\"),\r\n    modal = document.querySelector(\".modal\"),\r\n    modalOverlay = document.querySelector(\".modal-overlay\"),\r\n    modalCloseBtn = document.querySelector(\"[data-close]\");\r\n\r\n  //відкрити модалку\r\n  function openModal() {\r\n    modal.classList.add(\"show\");\r\n    modalOverlay.classList.add(\"show\");\r\n    document.body.style.overflow = \"hidden\"; // Заблокувати прокручування\r\n  }\r\n  // Закрити модалку\r\n  function closeModal() {\r\n    modal.classList.remove(\"show\");\r\n    modalOverlay.classList.remove(\"show\");\r\n    document.body.style.overflow = \"\"; // Відновити прокручування\r\n  }\r\n\r\n  const formContainer = document.querySelector(\".form\");\r\n\r\n  const submitButton = document.createElement(\"button\");\r\n  submitButton.classList.add(\"button\", \"submit-btn\");\r\n  submitButton.type = \"submit\";\r\n  submitButton.textContent = \"Отримати добірку фільмів\";\r\n\r\n  // Обробники подій для кнопок\r\n  modalTrigger.forEach((btn) => {\r\n    btn.addEventListener(\"click\", openModal);\r\n  });\r\n\r\n  modalCloseBtn.addEventListener(\"click\", closeModal);\r\n\r\n  // Закриття модалки при натисканні на оверлей\r\n  modalOverlay.addEventListener(\"click\", closeModal);\r\n\r\n  // Закриття модалки при натисканні клавіші Escape\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (e.code === \"Escape\" && modal.classList.contains(\"show\")) {\r\n      closeModal();\r\n    }\r\n  });\r\n  // ---------------------------- Модальне вікно\r\n\r\n  // Коротке опитуванняі\r\n\r\n  formContainer.innerHTML = \"\";\r\n\r\n  showQuestion(shortQuestions);\r\n\r\n  // Показати запитання\r\n  function showQuestion(questions) {\r\n    formContainer.innerHTML = \"\";\r\n\r\n    console.log(\"showQuestion\");\r\n\r\n    questions.forEach((element, index) => {\r\n      const headerContainer = document.createElement(\"div\");\r\n      headerContainer.classList.add(\"question-wrapper\");\r\n\r\n      //номер запитання\r\n      const numberTemplate = `<div class=\"question-number-container\">\r\n                    <span class=\"question-number\">${index + 1}</span>\r\n                </div>      `;\r\n      headerContainer.innerHTML = numberTemplate;\r\n\r\n      const questionContainer = document.createElement(\"div\");\r\n      questionContainer.classList.add(\"question-item\");\r\n\r\n      // перевірка чи обов'язкове запитання та виведення назви запитання\r\n      let questionTemplate = \"\";\r\n\r\n      if (element.needs) {\r\n        questionTemplate += `<p class=\"required-field\">*поле обов’язкове</p>`;\r\n      }\r\n      questionTemplate += `<p class=\"question\">${element.question}</p>`;\r\n\r\n      questionContainer.innerHTML = questionTemplate;\r\n\r\n      //  відповіді\r\n      switch (element[\"type\"]) {\r\n        case \"radio-mood\": {\r\n          const { img, answers } = element;\r\n          const lengthArray = answers.length;\r\n\r\n          const moodWrapper = document.createElement(\"div\");\r\n          questionContainer.appendChild(moodWrapper);\r\n          moodWrapper.classList = \"mood-options\";\r\n\r\n          let isMoodDefault;\r\n          for (let i = 0; i < lengthArray; i++) {\r\n            const savedMood = localStorage.getItem(\"radioMood\");\r\n            if (savedMood) {\r\n              isMoodDefault = answers[i] === savedMood;\r\n            } else {\r\n              isMoodDefault = answers[i] === \"Чудовий\";\r\n            }\r\n            const answerTemplate = `\r\n                            <label class=\"mood-option\">\r\n                                <input type=\"radio\" name=\"mood\" value=\"${\r\n                                  answers[i]\r\n                                }\" ${isMoodDefault ? \"checked\" : \"\"} />\r\n                                <div class=\"icon\">\r\n                                    <img src=\"${img[i]}\" alt=\"\" />\r\n                                </div>\r\n                                <span>${answers[i]}</span>\r\n                            </label>`;\r\n            moodWrapper.innerHTML += answerTemplate;\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        case \"radio\": {\r\n          let isPartnerDefault;\r\n          for (let answerText of element.answers) {\r\n            const savedValue = localStorage.getItem(\"radio\");\r\n            if (savedValue) {\r\n              isPartnerDefault = answerText === savedValue;\r\n            } else {\r\n              isPartnerDefault = answerText === \"Наодинці\";\r\n            }\r\n\r\n            const answerTemplate = `\r\n            <label class=\"radio-button-label\">\r\n                <input class=\"radio-button-field\" type=\"radio\" name=\"movie-partner\" value=\"${answerText}\" ${\r\n              isPartnerDefault ? \"checked\" : \"\"\r\n            } />\r\n                <span>${answerText}</span>\r\n            </label>`;\r\n            questionContainer.innerHTML += answerTemplate;\r\n          }\r\n          break;\r\n        }\r\n\r\n        case \"range\": {\r\n          const sliderTemplate = `   <div class = \"slider-group\">\r\n                            <input id=\"lower-slider\" class=\"lower-range-slider\" type=\"range\" min=\"0\" max=\"7\" step=\"1\" value=\"0\" required />\r\n                            <input id=\"upper-slider\" class=\"upper-range-slider\" type=\"range\" min=\"0\" max=\"7\" step=\"1\" value=\"7\" required />\r\n                        </div>\r\n                        <div class=\"slider-labels\"></div>`;\r\n          questionContainer.innerHTML += sliderTemplate;\r\n\r\n          const sliderContainer =\r\n            questionContainer.querySelector(\".slider-labels\");\r\n\r\n          element.answers.forEach((labelText, index) => {\r\n            const labelElement = document.createElement(\"span\");\r\n            labelElement.textContent = labelText;\r\n\r\n            sliderContainer.appendChild(labelElement);\r\n          });\r\n\r\n          break;\r\n        }\r\n\r\n        case \"input-fields\": {\r\n          const answerArray = element.answers;\r\n          const placeholderArray = element.placeholder;\r\n          const lengthArray = answerArray.length;\r\n\r\n          const savedValues = [];\r\n\r\n          // Спочатку відновлюємо збережені значення з localStorage\r\n          for (let i = 0; i < lengthArray; i++) {\r\n            const savedValue = localStorage.getItem(`input-field-${i}`);\r\n            savedValues[i] = savedValue ? savedValue : \"\"; // Якщо значення є, зберігаємо його, якщо ні - порожній рядок\r\n          }\r\n\r\n          // Створюємо інпут-поля\r\n          for (let i = 0; i < lengthArray; i++) {\r\n            const answerTemplate = `\r\n            \r\n              <label class=\"input-field-label\">\r\n                <span>${answerArray[i]}</span>\r\n                <input class=\"text-input-field\" type=\"text\" placeholder=\"${placeholderArray[i]}\" name=\"year-min-${i}\" pattern=\"\\\\d{4}\"\r\n                      value=\"${savedValues[i]}\" /> <!-- Підставляємо значення із savedValues -->\r\n              </label>\r\n            `;\r\n\r\n            questionContainer.innerHTML += answerTemplate;\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        case \"checkbox\": {\r\n          const options = element.answers\r\n            .split(\", \")\r\n            .map((e) => e[0].toUpperCase() + e.slice(1));\r\n\r\n          const checkboxWrapper = document.createElement(\"div\");\r\n          checkboxWrapper.className = \"checkbox-options\";\r\n\r\n          const savedOptions = localStorage.getItem(\"selectedOptions\");\r\n          const savedOptionsArray = savedOptions ? savedOptions.split(\",\") : [];\r\n\r\n          options.forEach((option) => {\r\n            const isChecked = savedOptionsArray.includes(option);\r\n\r\n            const answerTemplate = ` \r\n              <label class=\"checkbox-button-label\">\r\n                <input class=\"checkbox-button-field\" type=\"checkbox\" name=\"genre\" value=\"${option}\" ${\r\n              isChecked ? \"checked\" : \"\"\r\n            } />\r\n                <span>${option}</span>\r\n              </label>`;\r\n            checkboxWrapper.innerHTML += answerTemplate;\r\n          });\r\n\r\n          questionContainer.appendChild(checkboxWrapper);\r\n          break;\r\n        }\r\n      }\r\n\r\n      formContainer.appendChild(headerContainer);\r\n      headerContainer.appendChild(questionContainer);\r\n    });\r\n\r\n    formContainer.appendChild(submitButton);\r\n  }\r\n\r\n  let result = [];\r\n\r\n  // local Storage\r\n\r\n  const radioImgs = document.querySelectorAll(\r\n    '.mood-option input[type=\"radio\"]'\r\n  ); // Отримуємо всі радіокнопки\r\n  radioImgs.forEach((radio) => {\r\n    radio.addEventListener(\"change\", (event) => {\r\n      const selectedMood = event.target.value; // Отримуємо значення вибраного елемента\r\n      localStorage.setItem(\"radioMood\", selectedMood);\r\n    });\r\n  });\r\n\r\n  const radioFields = document.querySelectorAll(\".radio-button-field\");\r\n  radioFields.forEach((radio) => {\r\n    radio.addEventListener(\"change\", (event) => {\r\n      const selectedRadio = event.target.value;\r\n      localStorage.setItem(\"radio\", selectedRadio);\r\n    });\r\n  });\r\n\r\n  const inputFields = document.querySelectorAll(\".text-input-field\");\r\n  inputFields.forEach((input, index) => {\r\n    input.addEventListener(\"input\", () => {\r\n      localStorage.setItem(`input-field-${index}`, input.value); // Зберігаємо значення у localStorage\r\n    });\r\n  });\r\n\r\n  const checkboxFields = document.querySelectorAll(\".checkbox-button-field\");\r\n  checkboxFields.forEach((checkbox) => {\r\n    checkbox.addEventListener(\"change\", () => {\r\n      const selectedOptions = [];\r\n      checkboxFields.forEach((checkbox) => {\r\n        if (checkbox.checked) {\r\n          selectedOptions.push(checkbox.value); // Додаємо вибрані значення в масив\r\n        }\r\n      });\r\n      localStorage.setItem(\"selectedOptions\", selectedOptions.join(\",\")); // Зберігаємо вибрані опції як рядок, розділений комами\r\n    });\r\n  });\r\n\r\n  const lowerSlider = document.querySelector(\"#lower-slider\");\r\n  const upperSlider = document.querySelector(\"#upper-slider\");\r\n\r\n  lowerSlider.addEventListener(\"input\", () => {\r\n    localStorage.setItem(\"lowerSliderValue\", lowerSlider.value); // Зберігаємо значення нижнього слайдера\r\n  });\r\n\r\n  upperSlider.addEventListener(\"input\", () => {\r\n    localStorage.setItem(\"upperSliderValue\", upperSlider.value); // Зберігаємо значення верхнього слайдера\r\n  });\r\n\r\n  \r\n\r\n  // повідомлення про статус обробки відповідей користувача\r\n  const message = {\r\n    loading: \"../src/icons/spinner.svg\",\r\n    errorInLoading: \"Вибачте, на жаль, сталася помилка\",\r\n  };\r\n\r\n  // повідомлення про помилку\r\n\r\n  function errorMessage() {\r\n    const formWrapper = document.querySelector(\".form-wrapper\");\r\n    formWrapper.classList.add(\"hide\"); // Ховаємо опитування\r\n\r\n    const modalContainer = document.querySelector(\".modal-wrapper\");\r\n\r\n    // Створити контейнер для помилки\r\n    const errorContainer = document.createElement(\"div\");\r\n    errorContainer.classList.add(\"question-item\");\r\n    const errorTemplate = `<p class=\"question\">${message.errorInLoading}</p>`;\r\n    errorContainer.innerHTML += errorTemplate;\r\n\r\n    modalContainer.appendChild(errorContainer);\r\n\r\n    modalCloseBtn.addEventListener(\"click\", () => {\r\n      errorContainer.remove(); // Видаляємо помилку\r\n      formWrapper.classList.remove(\"hide\");\r\n      closeModal();\r\n      showQuestion(shortQuestions);\r\n    });\r\n  }\r\n\r\n  // запит до gpt\r\n  async function getMovieRecommendations(sandbox = true) {\r\n    console.log(\"Відправка запиту...\");\r\n\r\n    const spinnerContainer = document.createElement(\"div\");\r\n    spinnerContainer.id = \"spinner-container\";\r\n\r\n    const spinnerImg = document.createElement(\"img\");\r\n    spinnerImg.src = message.loading;\r\n    spinnerImg.alt = \"Loading...\";\r\n    spinnerContainer.appendChild(spinnerImg);\r\n    document.body.appendChild(spinnerContainer);\r\n\r\n    try {\r\n      const requestBody = {\r\n        result: result,\r\n        sandbox: sandbox,\r\n      };\r\n\r\n      const response = await fetch(\r\n        \"http://localhost:3000/api/getMovieRecommendations\",\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(requestBody),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.log(\"Error: \" + errorText);\r\n        errorMessage();\r\n        return;\r\n      }\r\n      // recommendations - масив з об'єктами\r\n      const recommendations = await response.json();\r\n      closeModal();\r\n      console.log(recommendations); // вивід добірки в консоль\r\n      printNewResults.openResults(recommendations);\r\n      // має виводитися на окрему сторінку\r\n\r\n    } catch (error) {\r\n      console.error(\"Помилка при завантаженні:\", error);\r\n      errorMessage();\r\n      return;\r\n    } finally {\r\n      spinnerContainer.remove();\r\n    }\r\n  }\r\n\r\n  function sendResults(questions) {\r\n    result = [];\r\n\r\n    questions.forEach((element) => {\r\n      const { type, question } = element;\r\n\r\n      let answer = \"\";\r\n\r\n      switch (type) {\r\n        case \"radio-mood\": {\r\n          const getAnswer =\r\n            document.querySelector('input[name=\"mood\"]:checked')?.value || null;\r\n\r\n          answer = `${getAnswer}`;\r\n          break;\r\n        }\r\n\r\n        case \"range\": {\r\n          const answerLower = document.querySelector(\"#lower-slider\").value;\r\n          const answerUpper = document.querySelector(\"#upper-slider\").value;\r\n\r\n          answer = `Від ${answerLower} до ${answerUpper}`;\r\n\r\n          break;\r\n        }\r\n\r\n        case \"radio\": {\r\n          const getAnswer =\r\n            document.querySelector('input[name=\"movie-partner\"]:checked')\r\n              ?.value || null;\r\n\r\n          answer = `${getAnswer}`;\r\n          break;\r\n        }\r\n\r\n        case \"input-fields\": {\r\n          const minYearDefault = 1950;\r\n          const maxYearDefault = new Date().getFullYear();\r\n          const answerMin =\r\n            document.querySelector('input[name=\"year-min-0\"]')?.value || minYearDefault;\r\n          const answerMax =\r\n            document.querySelector('input[name=\"year-min-1\"]')?.value || maxYearDefault;\r\n\r\n          answer = `Не раніше: ${answerMin}, не пізніше: ${answerMax}`;\r\n          break;\r\n        }\r\n\r\n        case \"checkbox\": {\r\n          console.log('Збереження почалося');\r\n          const selectedGenres = Array.from(\r\n            document.querySelectorAll('input[name=\"genre\"]:checked')\r\n          ).map((checkbox) => checkbox.value);\r\n\r\n          if (selectedGenres.length === 0) {\r\n            answer = element.answers\r\n              .split(\", \")\r\n              .map((e) => e[0].toUpperCase() + e.slice(1))\r\n              .join(\", \");\r\n          } else {\r\n            answer = selectedGenres.join(\", \");\r\n          }\r\n          break;\r\n        }\r\n      }\r\n\r\n      const newUserAnswer = {\r\n        question: question,\r\n        answer: answer,\r\n      };\r\n      result.push(newUserAnswer);\r\n    });\r\n\r\n    console.log(result);\r\n    getMovieRecommendations((sandbox = false));\r\n  }\r\n\r\n  const errorInputMin = document.querySelector(' p[name=\"error-year-0\"]');\r\n  const errorInputMax = document.querySelector(' p[name=\"error-year-1\"]');\r\n  const yearInputMin = document.querySelector('input[name=\"year-min-0\"]');\r\n  const yearInputMax = document.querySelector('input[name=\"year-min-1\"]');\r\n\r\n  // ВАЛІДАЦІЯ\r\n  function validateYears() {\r\n    const yearMin = yearInputMin.value.trim();\r\n    const yearMax = yearInputMax.value.trim();\r\n    const currentYear = new Date().getFullYear();\r\n\r\n    let isValid = false;\r\n\r\n    errorInputMin.style.display = \"none\";\r\n    errorInputMax.style.display = \"none\";\r\n    yearInputMin.style.border = \"1px solid white\";\r\n    yearInputMax.style.border = \"1px solid white\";\r\n\r\n    if (yearInputMin.validity.valid && yearInputMax.validity.valid) {\r\n      errorInputMin.style.display = \"none\";\r\n      errorInputMax.style.display = \"none\";\r\n      yearInputMin.style.border = \"1px solid white\";\r\n      yearInputMax.style.border = \"1px solid white\";\r\n      isValid = true;\r\n    }\r\n\r\n    // Перевірка: чи введене значення містить рівно 4 цифри\r\n    if (yearMin.length !== 4) {\r\n      errorInputMin.style.display = \"block\";\r\n      yearInputMin.style.border = \"1px solid red\";\r\n      errorInputMin.textContent = \"Введіть правильний рік\";\r\n      isValid = false;\r\n    }\r\n    if (yearMax.length !== 4) {\r\n      errorInputMax.style.display = \"block\";\r\n      yearInputMax.style.border = \"1px solid red\";\r\n      errorInputMax.textContent = \"Введіть правильний рік\";\r\n      isValid = false;\r\n    }\r\n\r\n    if (isNaN(yearMin)) {\r\n      errorInputMin.style.display = \"block\";\r\n      errorInputMin.textContent = \"Введіть числове значення\";\r\n      yearInputMin.style.border = \"1px solid red\";\r\n      isValid = false;\r\n    }\r\n    if (isNaN(yearMax)) {\r\n      errorInputMax.style.display = \"block\";\r\n      errorInputMax.textContent = \"Введіть числове значення\";\r\n      yearInputMax.style.border = \"1px solid red\";\r\n      isValid = false;\r\n    }\r\n\r\n    // Перевірка: чи порядок років коректний\r\n    if (yearMin > yearMax) {\r\n      errorInputMin.style.display = \"block\";\r\n      errorInputMax.style.display = \"block\";\r\n      yearInputMin.style.border = \"1px solid red\";\r\n      yearInputMax.style.border = \"1px solid red\";\r\n      errorInputMin.textContent = \"Перший рік має бути менший за другий\";\r\n      isValid = false;\r\n    }\r\n\r\n    // Перевірка: чи відповідають роки заданим межам\r\n    if (yearMin < 1950) {\r\n      errorInputMin.style.display = \"block\";\r\n      yearInputMin.style.border = \"1px solid red\";\r\n      errorInputMin.textContent = \"Рік не може бути меншим за 1950\";\r\n      isValid = false;\r\n    }\r\n    if (yearMax > currentYear) {\r\n      errorInputMax.style.display = \"block\";\r\n      yearInputMax.style.border = \"1px solid red\";\r\n      errorInputMax.textContent = `Рік не може бути більше ${currentYear} року`;\r\n      isValid = false;\r\n    }\r\n    if (yearMin === \"\") {\r\n      yearInputMin.value = 1950;\r\n      errorInputMin.style.display = \"none\";\r\n      yearInputMin.style.border = \"1px solid white\";\r\n      if (validateYears()) {\r\n          return isValid = true;\r\n      }\r\n     \r\n    }\r\n    if (yearMax === \"\") {\r\n      yearInputMax.value = currentYear;\r\n      errorInputMax.style.display = \"none\";\r\n      yearInputMax.style.border = \"1px solid white\";\r\n     if (validateYears()) {\r\n       return (isValid = true);\r\n     }\r\n    }\r\n\r\n    return isValid; // Якщо помилок немає\r\n  }\r\n\r\n  // function validateYears() {\r\n  //   const yearInputMin = document.querySelector(\"#yearInputMin\"); // Заміна на коректний селектор\r\n  //   const yearInputMax = document.querySelector(\"#yearInputMax\"); // Заміна на коректний селектор\r\n  //   const errorInputMin = document.querySelector(\"#errorInputMin\");\r\n  //   const errorInputMax = document.querySelector(\"#errorInputMax\");\r\n\r\n  //   if (!yearInputMin || !yearInputMax || !errorInputMin || !errorInputMax) {\r\n  //     console.error(\"Не вдалося знайти необхідні елементи у DOM\");\r\n  //     return false;\r\n  //   }\r\n\r\n  //   const yearMin = yearInputMin.value.trim();\r\n  //   const yearMax = yearInputMax.value.trim();\r\n  //   const currentYear = new Date().getFullYear();\r\n\r\n  //   let isValid = true;\r\n\r\n  //   // Скидання стилів і помилок\r\n  //   errorInputMin.style.display = \"none\";\r\n  //   errorInputMax.style.display = \"none\";\r\n  //   yearInputMin.style.border = \"1px solid white\";\r\n  //   yearInputMax.style.border = \"1px solid white\";\r\n\r\n  //   // Перевірка на валідність\r\n  //   if (yearMin.length !== 4 || isNaN(yearMin)) {\r\n  //     errorInputMin.style.display = \"block\";\r\n  //     yearInputMin.style.border = \"1px solid red\";\r\n  //     errorInputMin.textContent = isNaN(yearMin) \r\n  //       ? \"Введіть числове значення\" \r\n  //       : \"Введіть правильний рік\";\r\n  //     isValid = false;\r\n  //   }\r\n\r\n  //   if (yearMax.length !== 4 || isNaN(yearMax)) {\r\n  //     errorInputMax.style.display = \"block\";\r\n  //     yearInputMax.style.border = \"1px solid red\";\r\n  //     errorInputMax.textContent = isNaN(yearMax) \r\n  //       ? \"Введіть числове значення\" \r\n  //       : \"Введіть правильний рік\";\r\n  //     isValid = false;\r\n  //   }\r\n\r\n  //   // Перевірка порядку років\r\n  //   if (isValid && +yearMin > +yearMax) {\r\n  //     errorInputMin.style.display = \"block\";\r\n  //     errorInputMax.style.display = \"block\";\r\n  //     yearInputMin.style.border = \"1px solid red\";\r\n  //     yearInputMax.style.border = \"1px solid red\";\r\n  //     errorInputMin.textContent = \"Перший рік має бути менший за другий\";\r\n  //     isValid = false;\r\n  //   }\r\n\r\n  //   // Перевірка меж років\r\n  //   if (isValid && +yearMin < 1950) {\r\n  //     errorInputMin.style.display = \"block\";\r\n  //     yearInputMin.style.border = \"1px solid red\";\r\n  //     errorInputMin.textContent = \"Рік не може бути меншим за 1950\";\r\n  //     isValid = false;\r\n  //   }\r\n\r\n  //   if (isValid && +yearMax > currentYear) {\r\n  //     errorInputMax.style.display = \"block\";\r\n  //     yearInputMax.style.border = \"1px solid red\";\r\n  //     errorInputMax.textContent = `Рік не може бути більше ${currentYear} року`;\r\n  //     isValid = false;\r\n  //   }\r\n\r\n  //   // Заповнення значень за замовчуванням\r\n  //   if (!yearMin) {\r\n  //     yearInputMin.value = 1950;\r\n  //   }\r\n\r\n  //   if (!yearMax) {\r\n  //     yearInputMax.value = currentYear;\r\n  //   }\r\n\r\n  //   return isValid;\r\n  // }\r\n\r\n\r\n\r\n  submitButton.addEventListener(\"click\", (event) => {\r\n    event.preventDefault(); // Зупинити відправку форми за замовчуванням\r\n\r\n    // if (validateYears()) {\r\n    //   sendResults(shortQuestions);\r\n    //   localStorage.clear();\r\n    //   showQuestion(shortQuestions);\r\n    // }\r\n\r\n    localStorage.clear();\r\n    sendResults(shortQuestions);\r\n    showQuestion(shortQuestions);\r\n  });\r\n});\r\n"],"names":[],"sourceRoot":""}